---
title: 'Frontend Test?? #1'
description: '???????????????????????'
pubDate: 'Nov 6 2024'
heroImage: '../../../assets/images/pikachu.png'
category: 'Frontend'
tags: ['test', 'component']
lang: 'ja'
---

# ????????????

1. DOM????????????
2. ????????????

???????????????????????????
??????????????????????????????????????????????

?????????????????

```tsx
it('should match the snapshot', () => {
	const root = document.createElement('div')
	render(
		<MyComponent1>
			<MyComponent2 />
			<MyComponent3 />
		</MyComponent1>,
		root
	)

	expect(root.innerHTML).toMatchSnapshot()
})
```

??????????????????????????`<MyComponent1 />`????`<div />`?????`<span />`???????????????????????????????????????

# ?????????

??????????????????

?????????????????????????????Model-View-Intent??????????????????Side Effect????????????

# ??????????????????????????

??????????????????

1. UI
2. Domain model or logic
3. Store????Action?
4. Mapper????Middleware?

??A???????????4????????????????????????????????????

???JavaScript???????????2??4??????1??3???????????????????????????????????A???????????????????????????????????4?????????

????????????????????????????????????????????????????????????????????UI?????????????????????

# ??????????

??????????????E2E?????????????????????????????????
???Cypress?????E2E?????????????????????Component?????????????????

```tsx
describe('datetime input?clear????second????????', () => {
	it('datetime input?clear????????????second???????????', () => {
		// arrange
		cy.mount(<CreateScheduleModal isOpen={true} onClose={() => {}} />, {
			routerProps: {
				initialEntries: ['/cliparchive']
			}
		})

		// act
		cy.get('input[name="from"]').clear()
		cy.get('input[name="to"]').clear()

		// assert
		cy.get('input[name="from"]').should('have.attr', 'step', '1')
		cy.get('input[name="to"]').should('have.attr', 'step', '1')
	})
})
```

???????????????????second????????????????????second?????????????second???????`step=1`??????????????

## ???DOM????????????

?????????????????????????????????????????????????????????????????????????????????????????

????????????

```typescript
cy.get('input[name="from"]').clear()
```

?????DOM????????????????????????????????????DOM?????????????????????????????????????????????????????

?????????????????`<CreateScheduleModal/>`????????????????????????datetime input????????????????????????????????????????????????CreateSchedule???????????????????????datetime input?????????????????????????????

### ????

**????????????????????????????????**??????datetime input?????????????????from????????????????????

????????????????

```tsx
// ???????
screen.findByText(t(`${field.name}`, { namespace: 'form' }))
// label id???
cy.get(`[aria-labelby=${field.name}]`).clear()
// aria label???
cy.get(`[aria-label=${field.name}]`).clear()
```

?????Aria label????????DOM????????????????????????????????????????UI????????????????????????????????????????????????????DOM????????????????????????????????????????aria-label??????????????????????????????

????`data-*`????????

```typescript
cy.get(`[data-cy=${field.name}]`).clear()
```

????????????React????????????????testing library??????????`data-*`??????????????aria-label?????????find??????????????????

## ??????????????????????????

???????????????????????????????????????HTMLElement??????????????????????????

?????????????????

```tsx
/**
 * HTMLInputElement?????????????????
 **/
@customElement('custom-input')
class CustomInputWC extends LitElement {
    @property({type: String, reflect: true})
    label?: string;
    @property({type: Number, reflect: true})
    unit?: number;

    protected render(): unknown {
        return <input name=${this.label} step={this.unit.toString()}/>
    }
}

const CustomInput: ReactWebComponent<CustomInputWC> = createComponent({
    react: React,
    tagName: 'custome-input',
    class: CustomInputWC
});

const SchedulePage: React.FC<SchedulePage> = ({}) => {
    return <CreateScheduleModal>
        <CreateScheduleModal.HorizontalField>
            <CustomInput label="from" unit={1}/>
        </CreateScheduleModal.HorizontalField>
    </CreateScheduleModal>;
};
```

????????????label?step????????????????????????????

```tsx
describe('datetime input?clear????second????????', () => {
	it('datetime input?clear????????????second???????????', () => {
		// arrange
		cy.mount(<SchedulePage />, {
			routerProps: {
				initialEntries: ['/cliparchive']
			}
		})

		// act
		cy.get('[label="from"]').clear()
		cy.get('[label="to"]').clear()

		// assert
		cy.get('[label="from"]').should('have.attr', 'unit', 1)
		cy.get('[label="to"]').should('have.attr', 'unit', 1)
	})
})
```

????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????

2????...
